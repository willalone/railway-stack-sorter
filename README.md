# Railway Stack Sorter

–°–∏–º—É–ª—è—Ç–æ—Ä –¢-–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–≥–æ —É–∑–ª–∞ –Ω–∞ –∂–µ–ª–µ–∑–Ω–æ–π –¥–æ—Ä–æ–≥–µ, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –¢-–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–≥–æ —É–∑–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π —Å–æ—Å—Ç–∞–≤ –Ω–∞ –¥–≤–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤–∞–≥–æ–Ω–æ–≤. –°–æ—Å—Ç–∞–≤ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –≤–∞–≥–æ–Ω–æ–≤ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ (A –∏ B), –∏ –∫–∞–∂–¥—ã–π —Ç–∏–ø –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (MRO)** - —á–µ—Ä–µ–∑ –º–∏–∫—Å–∏–Ω—ã
2. **–ö–ª–∞—Å—Å Stack** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö "—Å—Ç–µ–∫"
3. **–¢-–æ–±—Ä–∞–∑–Ω—ã–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —É–∑–µ–ª** - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã
4. **–ü–∞—Ç—Ç–µ—Ä–Ω Factory Method** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞–≥–æ–Ω–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ–¥—Ö–æ–¥—ã

### 1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –º–∏–∫—Å–∏–Ω—ã (MRO)

–í JavaScript –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥ —Å **–º–∏–∫—Å–∏–Ω–∞–º–∏** (mixins) - –æ–±—ä–µ–∫—Ç–∞–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ "–ø—Ä–∏–º–µ—à–∞—Ç—å" –∫ –∫–ª–∞—Å—Å–∞–º.

```javascript
const Loggable = { 
    log(msg) { 
        console.log(`[${this.constructor.name}] ${msg}`); 
    } 
};

const Serializable = { 
    serialize() { 
        return JSON.stringify(this); 
    } 
};

class BaseClass {
    constructor() { 
        Object.assign(this, Loggable, Serializable); 
    }
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `Object.assign()` –∫–æ–ø–∏—Ä—É–µ—Ç –º–µ—Ç–æ–¥—ã –∏–∑ –º–∏–∫—Å–∏–Ω–æ–≤ –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∞—Å—Å–∞–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ (MRO) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ—Ä—è–¥–∫–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–∫—Å–∏–Ω–æ–≤ –≤ `Object.assign()`

### 2. –ö–ª–∞—Å—Å Stack

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö **—Å—Ç–µ–∫** (LIFO - Last In, First Out) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—Å—Å–∏–≤–∞.

```javascript
class Stack extends BaseClass {
    constructor() {
        super();
        this.items = [];
    }
    push(item) { this.items.push(item); }
    pop() { return this.isEmpty() ? null : this.items.pop(); }
    peek() { return this.isEmpty() ? null : this.items[this.items.length - 1]; }
    isEmpty() { return this.items.length === 0; }
    size() { return this.items.length; }
    clear() { this.items = []; }
    getAll() { return [...this.items]; }
}
```

**–ú–µ—Ç–æ–¥—ã:**
- `push(item)` - –¥–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –≤ –≤–µ—Ä—à–∏–Ω—É —Å—Ç–µ–∫–∞
- `pop()` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å –≤–µ—Ä—à–∏–Ω—ã —Å—Ç–µ–∫–∞
- `peek()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å –≤–µ—Ä—à–∏–Ω—ã –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è
- `isEmpty()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø—É—Å—Ç –ª–∏ —Å—Ç–µ–∫
- `size()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `clear()` - –æ—á–∏—â–∞–µ—Ç —Å—Ç–µ–∫
- `getAll()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ø–∏—é –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
- `inputStack` - –≤—Ö–æ–¥–Ω–æ–π —Å–æ—Å—Ç–∞–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `directionA` - —Å—Ç–µ–∫ –¥–ª—è –≤–∞–≥–æ–Ω–æ–≤ —Ç–∏–ø–∞ A
- `directionB` - —Å—Ç–µ–∫ –¥–ª—è –≤–∞–≥–æ–Ω–æ–≤ —Ç–∏–ø–∞ B

### 3. –ü–∞—Ç—Ç–µ—Ä–Ω Factory Method

**Factory Method** - –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.

```
class WagonFactory {
    static createWagon(type, number) {
        return type.toUpperCase() === 'A' ? new WagonTypeA(number) : 
               type.toUpperCase() === 'B' ? new WagonTypeB(number) : 
               null;
    }
    static createFromString(str) {
        const [type, number] = str.split('-');
        return this.createWagon(type, parseInt(number));
    }
}
```

### 4. –¢-–æ–±—Ä–∞–∑–Ω—ã–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —É–∑–µ–ª

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å `RailwaySortingYard` –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–≥–æ —É–∑–ª–∞.

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

```
_parseWagons(lines) {
    return lines
        .map(line => line.trim())
        .filter(line => line)
        .map(line => WagonFactory.createFromString(line))
        .filter(w => w !== null);
}
```

–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∫ –≤ –æ–±—ä–µ–∫—Ç—ã –≤–∞–≥–æ–Ω–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–ø–æ—á–∫—É –º–µ—Ç–æ–¥–æ–≤ (method chaining) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

```javascript
sort() {
    while (!this.inputStack.isEmpty()) {
        const wagon = this.inputStack.pop();
        (wagon.type === 'A' ? this.directionA : this.directionB).push(wagon);
    }
}
```

–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤–∞–≥–æ–Ω –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å—Ç–µ–∫–∞
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –≤–∞–≥–æ–Ω–∞
3. –ù–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç–µ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```bash
node railway-stack-sorter.js
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```
const { RailwaySortingYard, WagonFactory } = require('./railway-stack-sorter.js');

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–≥–æ —É–∑–ª–∞
const yard = new RailwaySortingYard();

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
yard.loadFromKeyboard(['A-1', 'B-1', 'A-2', 'B-2']);

// –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
const fileContent = 'A-1\nB-1\nA-2\nB-2';
yard.loadFromFile(fileContent);

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
yard.sort();

// –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
yard.printResults();
```

### –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–í–∞–≥–æ–Ω—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `–¢–ò–ü-–ù–û–ú–ï–†`

–ü—Ä–∏–º–µ—Ä—ã:
- `A-1` - –≤–∞–≥–æ–Ω —Ç–∏–ø–∞ A —Å –Ω–æ–º–µ—Ä–æ–º 1
- `B-10` - –≤–∞–≥–æ–Ω —Ç–∏–ø–∞ B —Å –Ω–æ–º–µ—Ä–æ–º 10

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑ —Ñ–∞–π–ª–∞ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–¥–∏–Ω –≤–∞–≥–æ–Ω:
```
A-1
B-1
A-2
B-2
```

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

```javascript
const yard = new RailwaySortingYard();
yard.loadFromKeyboard(['A-1', 'B-1', 'A-2', 'B-2', 'A-3', 'B-3']);
yard.sort();
yard.printResults();
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
=== –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ ===
–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ A: 3 –≤–∞–≥–æ–Ω–æ–≤
  –í–∞–≥–æ–Ω—ã: –í–∞–≥–æ–Ω A-3, –í–∞–≥–æ–Ω A-2, –í–∞–≥–æ–Ω A-1
–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ B: 3 –≤–∞–≥–æ–Ω–æ–≤
  –í–∞–≥–æ–Ω—ã: –í–∞–≥–æ–Ω B-3, –í–∞–≥–æ–Ω B-2, –í–∞–≥–æ–Ω B-1
```

### –ü—Ä–∏–º–µ—Ä 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞

```javascript
const fileContent = 'A-10\nB-10\nA-11\nA-12\nB-11\nB-12\nA-13';
yard.loadFromFile(fileContent);
yard.sort();
yard.printResults();
```
